# Cargo configuration for Android NDK cross-compilation
#
# This file configures the linkers for Android targets.
# 
# Prerequisites:
# 1. Install Android NDK (via Android Studio or standalone)
# 2. Set ANDROID_NDK_HOME environment variable
# 3. Install Rust targets: rustup target add aarch64-linux-android armv7-linux-androideabi x86_64-linux-android
#
# Alternatively, use cargo-ndk which handles this automatically:
#   cargo install cargo-ndk
#   cargo ndk -t arm64-v8a -o ./android/app/src/main/jniLibs build --release

# Android ARM64 (most modern devices)
[target.aarch64-linux-android]
# Using cargo-ndk is recommended, but if building manually:
# linker = "path/to/ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android21-clang"

# Android ARMv7 (older 32-bit devices)
[target.armv7-linux-androideabi]
# linker = "path/to/ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi21-clang"

# Android x86_64 (emulators)
[target.x86_64-linux-android]
# linker = "path/to/ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android21-clang"

# Build settings
[build]
# Uncomment to set a default target for development
# target = "aarch64-linux-android"

# Profile settings for release builds
[profile.release]
# Enable LTO for smaller binaries
lto = true
# Single codegen unit for better optimization
codegen-units = 1
# Strip symbols to reduce size
strip = true
# Optimize for size (optional, use "3" for max speed instead)
opt-level = "s"

# Profile for Android release builds with specific optimizations
[profile.release-android]
inherits = "release"
# Abort on panic for smaller binary size
panic = "abort"
